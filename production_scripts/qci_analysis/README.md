# QCI Analysis System

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤–æ–Ω–∫–æ–≤ (Quality of Call Index) –¥–ª—è VAPI –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI API.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–≤–æ–Ω–∫–æ–≤ –ø–æ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (100 –±–∞–ª–ª–æ–≤)
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–æ 1000+ –∑–≤–æ–Ω–∫–æ–≤ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** —Å evidence –∏ breakdown –ø–æ –∫–∞–∂–¥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é
- **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **–°—Ç–æ–∏–º–æ—Å—Ç—å ~$1 –Ω–∞ 1000 –∑–≤–æ–Ω–∫–æ–≤** —Å –º–æ–¥–µ–ª—å—é gpt-4o-mini

## üéØ QCI Scoring System

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ú–∞–∫—Å. –±–∞–ª–ª—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------------|----------|
| **Dynamics** | 30 | Agent Talk Ratio, Time-To-Value, First CTA, Dead Air |
| **Objections** | 20 | Resistance Recognition, Compliance, Alternatives |
| **Brand** | 20 | Brand Mention, Consistency, Language Match |
| **Outcome** | 30 | Final Outcome, Wrap-up, Tool Hygiene |

**–°—Ç–∞—Ç—É—Å—ã:**
- üü¢ **Pass** (80-100): –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- üü° **Review** (60-79): –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- üî¥ **Fail** (<60): –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install openai dotenv
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```bash
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞

```bash
# –¢–µ—Å—Ç –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ (preset: test)
node qci_analyzer.js data/raw/vapi_calls.json test

# –°—Ä–µ–¥–Ω–∏–π –æ–±—ä–µ–º (preset: medium - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
node qci_analyzer.js data/raw/vapi_calls.json

# –ë–æ–ª—å—à–æ–π –æ–±—ä–µ–º (preset: large)
node qci_analyzer.js data/raw/vapi_calls.json large
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã

### TEST (10-50 –∑–≤–æ–Ω–∫–æ–≤)
```javascript
{
  batchSize: 5,
  maxConcurrent: 2,
  retryAttempts: 2
}
```

### MEDIUM (100-500 –∑–≤–æ–Ω–∫–æ–≤) - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
```javascript
{
  batchSize: 20,
  maxConcurrent: 5,
  retryAttempts: 3
}
```

### LARGE (1000+ –∑–≤–æ–Ω–∫–æ–≤)
```javascript
{
  batchSize: 50,
  maxConcurrent: 10,
  retryAttempts: 3
}
```

## üìä –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å JSON —Ñ–∞–π–ª–∞–º–∏ –æ—Ç VAPI API:

```javascript
[
  {
    "id": "call-123",
    "transcript": "AI: Hello...\nUser: Hi...",
    "messages": [
      {
        "role": "bot",
        "message": "Hello",
        "time": 1000,
        "endTime": 3000,
        "secondsFromStart": 1.5
      }
    ],
    "startedAt": "2025-01-01T10:00:00Z",
    "endedAt": "2025-01-01T10:05:00Z",
    "cost": 0.05
  }
]
```

## üìà –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```javascript
{
  "callId": "call-123",
  "timestamp": "2025-01-01T10:00:00Z",
  "qci": {
    "totalScore": 75,
    "status": "review",
    "breakdown": {
      "dynamics": {
        "total": 22,
        "agentTalkRatio": { "score": 6, "evidence": {...} },
        "timeToValue": { "score": 8, "evidence": {...} },
        "firstCTA": { "score": 6, "evidence": {...} },
        "deadAirPenalty": { "penalty": 2, "evidence": [...] }
      }
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    },
    "gates": {
      "brandGate": { "passed": true },
      "stopGate": { "passed": false, "reason": "Comply time > 10s" },
      "toolGate": { "passed": true }
    },
    "flags": ["Language"]
  }
}
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
production_scripts/qci_analysis/
‚îú‚îÄ‚îÄ qci_analyzer.js           # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ qci_config.js        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ QCI –∏ –ø—Ä–µ—Å–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ openai_config.js     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenAI
‚îÇ   ‚îî‚îÄ‚îÄ lexicons.js          # –°–ª–æ–≤–∞—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
‚îú‚îÄ‚îÄ prompts/
‚îÇ   ‚îî‚îÄ‚îÄ qci_prompt.txt       # –ü—Ä–æ–º–ø—Ç –¥–ª—è OpenAI
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ call_parser.js       # –ü–∞—Ä—Å–∏–Ω–≥ VAPI –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ parallel_processor.js # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ qci_calculator.js    # –†–∞—Å—á–µ—Ç QCI —Å–∫–æ—Ä–æ–≤
‚îî‚îÄ‚îÄ README.md
```

## üí∞ –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–ú–æ–¥–µ–ª—å gpt-4o-mini:**
- Input: $0.15 –Ω–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- Output: $0.60 –Ω–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- **~$0.001 –Ω–∞ –∑–≤–æ–Ω–æ–∫ = $1 –Ω–∞ 1000 –∑–≤–æ–Ω–∫–æ–≤**

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- gpt-4o: ~$4 –Ω–∞ 1000 –∑–≤–æ–Ω–∫–æ–≤ (–≤—ã—à–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- gpt-3.5-turbo: ~$0.30 –Ω–∞ 1000 –∑–≤–æ–Ω–∫–æ–≤ (–Ω–∏–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ)

## üìã –î–µ—Ç–∞–ª–∏ –∞–Ω–∞–ª–∏–∑–∞

### A) Dynamics (30 –±–∞–ª–ª–æ–≤)

**A1. Agent Talk Ratio (0-8 –±–∞–ª–ª–æ–≤)**
- –¶–µ–ª–µ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω: 35-55%
- –®—Ç—Ä–∞—Ñ –∑–∞ –≤—ã—Ö–æ–¥ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 25-65%

**A2. Time-To-Value (0-8 –±–∞–ª–ª–æ–≤)**
- –¶–µ–ª—å: ‚â§20 —Å–µ–∫—É–Ω–¥ –¥–æ –ø–µ—Ä–≤–æ–≥–æ value-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- -1 –±–∞–ª–ª –∑–∞ –∫–∞–∂–¥—ã–µ +5 —Å–µ–∫—É–Ω–¥

**A3. First CTA (0-8 –±–∞–ª–ª–æ–≤)**
- –¶–µ–ª—å: ‚â§120 —Å–µ–∫—É–Ω–¥ –¥–æ –ø–µ—Ä–≤–æ–≥–æ call-to-action
- -2 –±–∞–ª–ª–∞ –∑–∞ –∫–∞–∂–¥—ã–µ +30 —Å–µ–∫—É–Ω–¥

**A4. Dead Air Penalty (–¥–æ -6 –±–∞–ª–ª–æ–≤)**
- –®—Ç—Ä–∞—Ñ –∑–∞ –ø–∞—É–∑—ã >3 —Å–µ–∫—É–Ω–¥
- -2 –±–∞–ª–ª–∞ –∑–∞ –∫–∞–∂–¥—ã–π —Å–ª—É—á–∞–π

### B) Objections & Compliance (20 –±–∞–ª–ª–æ–≤)

**B1. Recognized Resistance (0-6 –±–∞–ª–ª–æ–≤)**
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–π –≤ —Ç–µ—á–µ–Ω–∏–µ 5-10 —Å–µ–∫—É–Ω–¥

**B2. Time-To-Comply (0-8 –±–∞–ª–ª–æ–≤)**
- –¶–µ–ª—å: ‚â§10 —Å–µ–∫—É–Ω–¥ –¥–æ compliance
- Gate: –ø—Ä–æ–≤–∞–ª –µ—Å–ª–∏ >10 —Å–µ–∫—É–Ω–¥

**B3. Alternative Offered (0-6 –±–∞–ª–ª–æ–≤)**
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (email/callback)

### C) Brand & Language (20 –±–∞–ª–ª–æ–≤)

**C1. First Brand Mention (0-8 –±–∞–ª–ª–æ–≤)**
- –¶–µ–ª—å: ‚â§10 —Å–µ–∫—É–Ω–¥
- Gate: –ø—Ä–æ–≤–∞–ª –µ—Å–ª–∏ >10 —Å–µ–∫—É–Ω–¥

**C2. Brand Variants (0-8 –±–∞–ª–ª–æ–≤)**
- –ò–¥–µ–∞–ª: 1 –≤–∞—Ä–∏–∞–Ω—Ç (–∏–¥–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- -4 –±–∞–ª–ª–∞ –∑–∞ –∫–∞–∂–¥—ã–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

**C3. Language Match (0-4 –±–∞–ª–ª–∞)**
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —è–∑—ã–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ ‚â§15 —Å–µ–∫—É–Ω–¥

### D) Outcome & Hygiene (30 –±–∞–ª–ª–æ–≤)

**D1. Outcome (0-15 –±–∞–ª–ª–æ–≤)**
- meeting_booked: 15
- warm_lead: 10
- callback_set: 6
- info_sent: 4
- no_outcome: 0

**D2. Wrap-up (0-5 –±–∞–ª–ª–æ–≤)**
- –ù–∞–ª–∏—á–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/—Ä–µ–∑—é–º–µ –≤ –∫–æ–Ω—Ü–µ

**D3. Tool Hygiene (0-10 –±–∞–ª–ª–æ–≤)**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö wait-—Ñ—Ä–∞–∑: +4
- ‚â§1 –∏–∑–≤–∏–Ω–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç—É: +3
- Latency –ø–æ—Å–ª–µ tools ‚â§2—Å: +3

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ API

```javascript
const QCIAnalyzer = require('./qci_analyzer');

const analyzer = new QCIAnalyzer({
  batchSize: 30,
  maxConcurrent: 8,
  saveResults: true
});

const results = await analyzer.analyzeCallsFromFile('data.json');
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```javascript
// config/qci_config.js
const CUSTOM_CONFIG = {
  batchSize: 100,
  maxConcurrent: 15,
  retryAttempts: 5,
  saveResults: true,
  verbose: false
};
```

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è lexicons

```javascript
// config/lexicons.js
const LEXICONS = {
  cta: ["meeting", "schedule", "demo", "book"],
  value: ["save money", "increase sales", "ROI"],
  brand_canonical: "Your Company Name"
};
```

## üîç Troubleshooting

### –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ JSON
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª—è `transcript` –∏–ª–∏ `messages`

### –û—à–∏–±–∫–∏ OpenAI API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É
- –ü—Ä–∏ rate limiting - —É–º–µ–Ω—å—à–∏—Ç–µ `maxConcurrent`

### –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ lexicons –ø–æ–¥ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ gpt-4o –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `qci_analysis.log`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –Ω–∞ –º–∞–ª–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö VAPI.